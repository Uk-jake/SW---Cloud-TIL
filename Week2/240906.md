# 오늘 배운 것
- **주요 개념**: Linux 명령어, Vim 편집기, Shell
- **구체적인 내용**
    - Linux 명령어: alias 설정, 시스템 정보 확인
    - Vim 편집기: 동작 모드, 내용 검색, 파일 읽어오기
    - Shell: Shell 종류, 변경 방법, 리다이렉션, 변수 사용법
    - 파일 시스템: Linux의 파일 시스템

# 상세 학습 내용
## 파일 시스템
### 디렉토리와 파일 관리
- 우분투 파일 시스템은 **파일과 디렉토리의 계층형 구조**입니다.
- 리눅스는 **최상위 디렉토리(루트 디렉토리)**가 하나입니다.
    - 윈도우는 물리적인 디스크를 여러 개 저장하거나 논리적으로 하나의 디스크를 분할하면 여러 개의 루트 디렉토리가 만들어지지만, 리눅스는 여러 개의 물리적인 디스크를 하나의 루트에서 제어할 수 있습니다.
- **작업 디렉토리**: 현재 사용 중인 디렉토리.
    - `pwd` 명령어로 확인 가능하며, `pwd`는 현재 디렉토리의 절대 경로를 저장합니다.
    - `.`: 현재 디렉토리를 의미. 예: `./test.txt`는 현재 디렉토리의 `test.txt` 파일을 의미.
    - `..`: 상위 디렉토리를 의미.
    - `/`: 루트 디렉토리를 의미.
    - `~`: 홈 디렉토리를 의미.

### 루트에 기본적으로 제공되는 디렉토리

- `ls -aF /` 명령어로 루트 디렉토리의 내용을 확인할 수 있습니다.
    - `/`로 끝나면 디렉토리입니다.
    - `@`가 붙은 것은 **심볼릭 링크**입니다.
- **`bin`**과 **`lib`** 디렉토리는 유닉스 초창기부터 존재했던 디렉토리이며, 현재는 `/usr/bin`과 `/usr/lib`로 변경되었습니다. 명령어 호환성을 위해 이 디렉토리들은 심볼릭 링크로 제공됩니다.
  
#### 주요 디렉토리
- **/dev**: 디바이스 파일이 배치된 디렉토리.
- **/home**: 사용자 디렉토리.
- **/etc**: 리눅스 설정 파일이 위치한 디렉토리.
- **/opt**: 추가 패키지가 설치되는 디렉토리.
- **/root**: root 계정의 홈 디렉토리.
- **/sys**: 리눅스 커널 관련 파일이 저장된 디렉토리.
- **/usr**: 기본 실행 파일, 라이브러리 파일, 헤더 파일이 저장된 디렉토리.
- **/boot**: 부팅과 관련된 파일.
- **/lost+found**: 파일 시스템에 문제가 발생했을 때 복구된 파일이 저장되는 디렉토리.
- **/mnt**: 파일 시스템을 임시로 마운트하는 디렉토리.
    - **마운트**: 파일에 접근할 수 있도록 연결시키는 작업.
- **/proc**: 프로세스 정보와 커널 관련 정보가 저장된 디렉토리.
- **/run**: 실행 중인 서비스와 관련된 파일이 저장된 디렉토리.
- **/srv**: FTP나 웹 서비스 등 시스템에서 제공하는 서비스의 데이터가 저장된 디렉토리.
- **/tmp**: 시스템 사용 중 발생하는 임시 데이터가 저장되는 디렉토리. 재시작 시 모든 파일이 삭제됩니다.
- **/var**: 로그와 같이 자주 바뀌는 데이터가 저장되는 디렉토리.

### 절대 경로와 상대 경로

- **절대 경로**: 루트(`/`)로부터의 경로로, 하나만 존재합니다.
- **상대 경로**: 현재 위치(`.`)로부터의 경로입니다.

### 파일의 구성 요소

- 리눅스에서 파일은 **파일 이름**, **I-node**, **데이터 블록**으로 나누어 저장됩니다.
    - **파일 이름**은 절대 경로의 형태로 만들어집니다.
    - 파일 이름은 **I-node**를 가리키고, I-node는 파일의 실제 **데이터 블록**을 가리킵니다.
    
    ![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/fdf68463-1c23-421f-96a8-6b77e0a47775/528c7319-a8da-4238-80b3-0e456aa1a243/image.png)

- 여러 개의 파일 이름이 동일한 I-node를 공유할 수 있습니다.
- 파일 이름은 중복될 수 없습니다.
    - 리눅스에서 `.`으로 시작하면 **숨김 파일**입니다.
- **I-node**는 파일에 대한 정보를 저장합니다.
    - 파일의 종류, 소유권, 접근 권한, 타임스탬프, 저장 위치 등을 포함합니다.
    - 중복된 데이터를 사용할 경우, 동일한 I-node를 공유할 수 있습니다.
    - **I-node**는 참조하는 데이터가 없으면 자동으로 삭제됩니다.
- **데이터 블록**에는 파일의 실제 내용이 연속적으로 저장됩니다.
- **데이터 블록**만 보면 데이터를 구분할 수 없습니다. **I-node**에 저장된 정보를 통해 데이터의 종류와 범위를 결정합니다.

**정리**: 파일 이름(절대 경로)은 I-node를 가리키고, I-node는 파일에 대한 정보를 저장하며 데이터 블록을 가리킵니다.

### 디렉토리 관련 명령어

1. **`pwd`**: 현재 디렉토리의 절대 경로 확인.
2. **`cd`**: 현재 작업 디렉토리 이동.
    - `cd [디렉토리]`
    - 디렉토리를 생략하거나 `~`를 사용하면 홈 디렉토리로 이동.
    - `.`과 `..` 사용 가능.
    - **Tab** 키를 사용한 자동 완성 가능.
3. **`ls`**: 디렉토리의 내용을 출력.
    - `ls [옵션] [디렉토리 or 파일]`
    - 디렉토리를 생략하면 현재 디렉토리의 내용이 출력됨.
    - 디렉토리 대신 파일을 지정하면 파일 이름이 출력되어, 파일 존재 여부 확인에 사용됩니다.
    - 주요 옵션:
        - `a`: 숨김 파일을 포함하여 모든 파일 목록 출력.
        - `d`: 디렉토리 자체의 정보를 출력.
        - `i`: 첫 번째 행에 I-node 번호를 출력.
        - `l`: 파일의 상세 정보를 출력.
        - `A`: `.`와 `..`를 제외한 모든 파일 목록 출력.
        - `F`: 파일의 종류를 표시(`*`: 실행 파일, `/`: 디렉토리, `@`: 심볼릭 링크).
        - `L`: 심볼릭 링크 파일의 경우 원본 파일의 정보를 출력.
        - `R`: 하위 디렉토리까지 목록 출력.
    - **상세 정보 보기**: `ls -l`

    ![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/fdf68463-1c23-421f-96a8-6b77e0a47775/439b3b8c-5551-4051-8ab1-40c1f959b8f3/image.png)

    | 필드 번호 | 필드 값 | 의미 |
    | --- | --- | --- |
    | 1 | d | 파일의 종류 (예: `-`: 일반 파일, `d`: 디렉토리, `l`: 심볼릭 링크) |
    | 2 | rwxr-xr-x | 소유자, 그룹, 기타 사용자에 대한 접근 권한 |
    | 3 | 2 | 하드 링크 수 |
    | 4 | jake | 파일 소유자 |
    | 5 | jake | 파일이 속한 그룹 |
    | 6 | 4096 | 파일 크기 (바이트 단위) |
    | 7 | Sep 3 07:05 | 마지막 수정 시간 |
    | 8 | ls.err | 파일 이름 |

    - **디렉토리 자체 정보를 확인**하고 싶을 때: `ls -dl`.
    - 윈도우와의 호환성을 위해 `dir`과 `vdir` 명령어도 제공됩니다.
4. **`mkdir`**: 디렉토리 생성.
    - 쓰기 권한이 있는 경우에만 가능합니다.
    - `-p` 옵션: 중간 디렉토리가 없을 경우 자동으로 생성. 한 번에 여러 계층을 만들 때 유용합니다.
5. **`rmdir`**: 디렉토리 삭제.
    - 하위 디렉토리가 있는 경우 삭제되지 않습니다.
    - `-p` 옵션을 사용하면 상위 디렉토리가 비어 있을 경우 함께 삭제됩니다.
6. **`cat`**: 텍스트 파일을 출력하는 명령.
    - 파일을 지정하지 않으면 키보드 입력을 그대로 출력합니다.
    - `-n` 옵션으로 행 번호 출력 가능.
7. **`more`**: 텍스트 파일을 **페이지 단위로 출력**.
    - Spacebar: 다음 페이지, `b`: 이전 페이지, `q`: 중단.
    - `/문자열`: 해당 문자열을 검색.
8. **`less`**: `more` 명령어의 개선된 버전.
9. **`head/tail`**: 파일의 앞부분이나 뒷

부분을 출력.
    - `tail -f`: 파일 내용이 실시간으로 변경될 때 자동으로 계속 출력.
10. **`cp`**: 파일 복사.
    - `cp [옵션] [파일1] [파일2]`
    - 주요 옵션:
        - `i`: 덮어쓸 것인지 묻기.
        - `r`: 디렉토리 복사 시 사용.
    - 여러 개의 파일을 복사할 때, 마지막 경로는 **디렉토리**여야 합니다.
11. **`rm`**: 파일 또는 디렉토리 삭제.
    - 주요 옵션:
        - `i`: 삭제할 때마다 확인.
        - `r`: 디렉토리 삭제 시 사용.
12. **`mv`**: 파일 또는 디렉토리 이동. 이름 변경도 가능.
13. **`file`**: 파일의 종류를 출력.
14. **`ln`**: 링크 생성.
    - `ln [옵션] <원본 파일> <링크 이름>`.
    - **하드 링크**: 원본 파일과 동일한 I-node를 참조.
        - 디렉토리는 하드 링크로 만들 수 없으며, 서로 다른 디스크에 걸쳐서도 생성할 수 없습니다.
    - **심볼릭 링크**: 원본 파일에 대한 참조를 나타내는 특수 파일. 원본 파일이 삭제되면 링크는 깨지지만, 심볼릭 링크 파일 자체는 삭제되지 않습니다.

    ![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/fdf68463-1c23-421f-96a8-6b77e0a47775/20433622-b9f5-4945-a102-a0cec79e1542/image.png)

    위 사진은 아래 명령어로 파일을 복제한 결과입니다:

    ```bash
    # cp 명령어로 linkCp.txt 생성
    cp link.txt linkCp.txt
    
    # ln 명령어로 linkHard.txt 생성
    ln link.txt linkHard.txt
    
    # ln -s 명령어로 linkSymbol.txt 생성
    ln -s link.txt linkSymbol.txt
    ```

    복사된 파일의 결과에서 **I-node 번호**에 주목해야 합니다.

    - **linkCp.txt**: **link.txt와 I-node 번호가 다릅니다.** 이는 새로운 I-node와 데이터 블록을 생성한 결과로, linkCp.txt는 link.txt의 영향을 받지 않습니다.
    - **linkHard.txt**: **link.txt와 동일한 I-node 번호**를 가집니다. 두 파일은 같은 I-node를 참조하므로, link.txt의 내용이 변경되면 linkHard.txt의 내용도 변경됩니다. 하지만 link.txt가 삭제되더라도 linkHard.txt는 영향을 받지 않습니다.
    - **linkSymbol.txt**: **link.txt와 다른 I-node 번호**를 가지지만, link.txt가 삭제되면 linkSymbol.txt는 깨지게 됩니다. 이는 심볼릭 링크가 파일 이름을 참조하기 때문입니다.

15. **`find`**: 파일 검색 명령어.
    - `find [경로] [검색 조건] [동작 옵션]`.
    - 주요 검색 조건:
        - `-name 파일명`: 파일 이름으로 검색. 예: `find . -name "*.txt"`.
        - `-type 파일종류`: 파일 종류로 검색.
        - `-user 유저명`: 파일 소유자로 검색.
        - `-perm 접근 권한`: 접근 권한으로 검색.
    - 주요 동작 옵션:
        - `-exec`: 검색된 파일에 명령 실행.
        - `-print`: 검색된 파일의 경로 출력.
        - `-ls`: 검색 결과를 긴 목록으로 출력.
16. **`locate`**: 파일이나 디렉토리를 빠르게 검색.
    - 기본적으로 설치되지 않으므로, 설치 후 사용.
    - `sudo apt-get install plocate`로 설치 가능.
    - **locate**는 데이터베이스를 통해 검색하기 때문에 빠르지만, 업데이트 후 생성된 파일은 반영되지 않습니다.

---

## 파일 접근 권한 관리

- 리눅스는 다중 사용자 시스템이므로, 파일에 접근할 수 있는 권한을 제한할 수 있습니다.
- 접근 권한은 파일의 속성 중 하나로, `ls -l` 명령어로 확인할 수 있습니다.

### 권한 종류

- **읽기 권한**:
    - 파일을 읽거나 복사할 수 있음.
    - 디렉토리의 경우, **목록**을 볼 수 있지만 실행 권한이 있어야 파일을 열 수 있습니다.
- **쓰기 권한**:
    - 파일을 수정, 이동, 삭제할 수 있음.
    - 디렉토리의 경우, 파일을 생성하거나 삭제할 수 있습니다.
- **실행 권한**:
    - 파일을 실행할 수 있음.
    - 디렉토리의 경우, **cd** 명령어를 사용할 수 있습니다.

### 표기 방법

- 권한이 있을 때는 `r`, `w`, `x`로 표시하고, 권한이 없을 때는 `-`로 표시됩니다.
- **소유자**, **소유자가 속한 그룹**, **기타 사용자**의 권한을 나타내며, 아홉 글자로 구성됩니다.
- 숫자로 권한을 표기하는 경우도 있습니다. 각 카테고리는 8진수로 표현됩니다.

### 접근 권한 변경

- `chmod [옵션] [파일 경로]` 명령어로 권한을 변경할 수 있습니다.
    - `-R`: 하위 디렉토리까지 모두 변경.
    - 기호를 사용하여 권한을 변경하거나, 3개의 8진수로 표현할 수 있습니다.
    - 예: `chmod u+rwx, g+rx, o+r [파일 경로]`.

### 기본 접근 권한

- **파일**: `rw-rw-r--` (664).
- **디렉토리**: `rwxrwxr-x` (775).

### 기본 접근 권한 확인 및 수정

- `umask` 명령어로 기본 접근 권한을 확인할 수 있습니다.
    - `umask`: 제외할 권한을 숫자로 표시.
    - `umask -S`: 부여할 권한을 문자열로 표시.
    - 기본적으로 **디렉토리**의 권한을 표시하며, 파일은 이 권한에서 **실행 권한이 제거된 상태**로 만들어집니다.
- **umask 값을 수정**하면 생성되는 파일과 디렉토리의 기본 접근 권한이 변경됩니다.
    - 예: `umask 022`로 설정하면 그룹에 쓰기 권한을 부여하지 않습니다.

---

## 특수 접근 권한

- **SetUID (4)**: 파일을 실행하는 동안, 파일 소유자의 권한으로 실행됩니다.
    - 파일 소유자에게 실행 권한이 있을 때, 권한에 `s`가 표시됩니다.
    - **passwd** 명령어가 대표적인 SetUID 파일입니다.

- **SetGID (2)**: 파일을 실행하는 동안, 소유 그룹의 권한으로 실행됩니다.

- **Sticky Bit (1)**: 디렉토리에 설정되며, 모든 사용자가 파일을 생성할 수 있지만 자신이 생성한 파일만 삭제할 수 있습니다.
    - 대표적인 예: `/tmp` 디렉토리.

---

## 프로세스 관리

### 개요

- 리눅스는 **다중 프로세스 시스템**으로, 여러 프로세스가 동시에 실행됩니다.
- 프로세스는 **부모 자식 관계**를 갖습니다.
- 프로세스는 **시스템 프로세스**(운영체제에서 생성)와 **사용자 프로세스**(사용자가 생성)로 나뉩니다.
    - 리눅스 부팅 시 **systemd** 프로세스와 **kthreadd** 프로세스가 생성되며, 이 두 프로세스를 제외한 모든 프로세스는 **부모 프로세스**를 가집니다.

### 프로세스 번호 (PID)

- **PID**(Process Identification Number)는 프로세스가 생성될 때 부여되는 고유한 번호입니다.
- 이름 대신 번호를 사용하면 동시에 여러 번 실행된 프로그램을 쉽게 구분할 수 있습니다.
    - 부팅 시 실행되는 systemd가 1번 PID를 가집니다.

### 프로세스 종류

1. **Daemon Process**: 시스템에서 백그라운드로 실행되며, 특정 서비스나 작업을 수행하기 위해 대기 상태로 있다가 요청이 오면 작업을 처리합니다.
2. **Orphan Process**: 부모 프로세스가 종료되었지만 자식 프로세스가 여전히 남아 있는 상태. 이 경우 1번 프로세스(systemd)가 새로운 부모 프로세스가 됩니다.
3. **Zombie Process**: 자식 프로세스가 종료되었지만, 부모 프로세스가 이를 제대로 처리하지 않아 자식 프로세스의 정보가 남아 있는 상태. 프로세스 목록에서는 **defunct**로 표시됩니다.

### 프로세스 목록 확인

1. **`ps [옵션]`**: 프로세스 정보를 확인.
    - 주요 옵션:
        - `e`: 시스템에서 실행 중인 모든 프로세스 정보 출력.
        - `f`: 프로세스에 대한 자세한 정보 출력

.
        - `u uid`: 특정 사용자의 프로세스 정보 출력.
        - `p pid`: 특정 PID 프로세스 정보 출력.
        - `a`: 터미널에서 실행된 프로세스 정보 출력.
        - `x`: 시스템에서 실행 중인 모든 프로세스 정보 출력.
        - `--pid PID`: 특정 PID 정보를 출력.
  
이와 같이 내가 학습한 내용을 정리했고, 표현을 자연스럽게 통일했습니다. 궁금한 점이 있으면 언제든지 질문해 주세요!


    
## 참고 자료
- 

## 배운 점 & 느낀 점
- Linux의 기초를 다시 정리할 수 있는 시간이어서 매우 유익했다. 그동안 리눅스를 사용할 때마다 모르는 명령어를 그때그때 찾아보며 작업했는데, 이번 Linux 강의가 끝나면 리눅스의 전반적인 개념을 제대로 이해할 수 있을 것 같다. 배울수록 흩어져 있던 조각들이 정리되는 느낌이 들어 더욱 흥미롭다.

## 내일의 목표
- 시간이 된다면 Linux에서 네트워크를 어떻게 관리하는지 공부해보고 싶다. 또한, 학습을 통해 왜 Linux가 서버 운영체제로 많이 사용되는지 직접 체감해보고 싶다.